From fbd9b9988ad67c00fbda871bf852ec9272659377 Mon Sep 17 00:00:00 2001
From: Ryan Gonzalez <rymg19@gmail.com>
Date: Wed, 31 Aug 2022 12:07:42 -0500
Subject: [PATCH] Always use system libffi on Linux

---
 build/config/linux/libffi/BUILD.gn | 13 ++-----------
 1 file changed, 2 insertions(+), 11 deletions(-)

diff --git a/build/config/linux/libffi/BUILD.gn b/build/config/linux/libffi/BUILD.gn
index fb4fa18bf7c60..a4041727b1c09 100644
--- a/build/config/linux/libffi/BUILD.gn
+++ b/build/config/linux/libffi/BUILD.gn
@@ -4,15 +4,6 @@
 
 import("//build/config/linux/pkg_config.gni")
 
-if (default_toolchain == "//build/toolchain/cros:target") {
-  pkg_config("libffi") {
-    packages = [ "libffi" ]
-  }
-} else {
-  # On Linux, statically link libffi.  This is necessary to prevent a situation
-  # where the runtime version of libffi is different from the build-time version
-  # from the sysroot.
-  config("libffi") {
-    libs = [ ":libffi_pic.a" ]
-  }
+pkg_config("libffi") {
+  packages = [ "libffi" ]
 }
-- 
2.37.2

