From 1b24ef7f3c703f42e24550d281bc7c31659a8f4c Mon Sep 17 00:00:00 2001
From: Ryan Gonzalez <git@refi64.dev>
Date: Tue, 18 Apr 2023 20:35:46 -0500
Subject: [PATCH] Treat EGL_BAD_ATTRIBUTE as an unsupported version

---
 ui/gl/gl_context_egl.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/ui/gl/gl_context_egl.cc b/ui/gl/gl_context_egl.cc
index 574c33339b60f..82329f9d6b5d1 100644
--- a/ui/gl/gl_context_egl.cc
+++ b/ui/gl/gl_context_egl.cc
@@ -348,7 +348,7 @@ bool GLContextEGL::Initialize(GLSurface* compatible_surface,
   // falling back to a lower version.
   GLint error = context_ ? EGL_SUCCESS : eglGetError();
   if (!context_ && gl_display_->ext->b_EGL_KHR_no_config_context &&
-      error == EGL_BAD_MATCH) {
+      (error == EGL_BAD_MATCH || error == EGL_BAD_ATTRIBUTE)) {
     // Set up the list of versions to try: 3.1 -> 3.0 -> 2.0
     std::vector<std::pair<EGLint, EGLint>> candidate_versions;
     if (context_client_major_version == 3 &&
-- 
2.39.2

